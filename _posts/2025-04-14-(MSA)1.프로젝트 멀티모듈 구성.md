---
layout: post
title: (MSA)1.í”„ë¡œì íŠ¸ ë©€í‹°ëª¨ë“ˆ êµ¬ì„±
category: [Multi Module]
tags: [Multi Module, MSA]
redirect_from:

- /2025/04/14/

---
# ğŸ§± Spring Boot ë©€í‹°ëª¨ë“ˆ í”„ë¡œì íŠ¸ êµ¬ì„± ì •ë¦¬

Spring Boot ê¸°ë°˜ì˜ ë©€í‹°ëª¨ë“ˆ í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•˜ë©´ì„œ, ë£¨íŠ¸ ë° ê° ëª¨ë“ˆì˜ `build.gradle`ê³¼ `settings.gradle` ì„¤ì •ì„ ì–´ë–»ê²Œ êµ¬ì„±í–ˆëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ ì´ìœ ì— ëŒ€í•´ ìƒì„¸íˆ ì •ë¦¬í•©ë‹ˆë‹¤.

---

## ğŸ“‚ ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡°

```plaintext
dream
â”œâ”€â”€ build.gradle
â”œâ”€â”€ settings.gradle
â”œâ”€â”€ common
â”‚   â””â”€â”€ build.gradle
â”œâ”€â”€ auth
â”‚   â””â”€â”€ build.gradle
â”œâ”€â”€ product
â”‚   â””â”€â”€ build.gradle
â””â”€â”€ payment
    â””â”€â”€ build.gradle
```

## âš™ï¸ settings.gradle
```groovy
pluginManagement {
    repositories {
        maven { url 'https://repo.spring.io/milestone' }
        maven { url 'https://repo.spring.io/snapshot' }
        gradlePluginPortal()
    }
}
rootProject.name = 'dream'
include 'common'
include 'auth'
include 'product'
include 'payment'
```
### ì„¤ëª…   
- pluginManagement: í”ŒëŸ¬ê·¸ì¸ì„ ì–´ë””ì„œ ë°›ì„ì§€ ì •ì˜. ì‹¤í—˜ì  í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©ì„ ìœ„í•´ Spring milestone/snapshot ì €ì¥ì†Œë„ ì¶”ê°€.
- rootProject.name: ë£¨íŠ¸ í”„ë¡œì íŠ¸ì˜ ì´ë¦„ì„ dreamìœ¼ë¡œ ì„¤ì •.
- include: í•˜ìœ„ ëª¨ë“ˆ(common, auth, product, payment)ì„ ëª…ì‹œì ìœ¼ë¡œ í¬í•¨.

## ğŸ  ë£¨íŠ¸ build.gradle
```groovy
plugins {
    id 'java'
    id 'org.springframework.boot' version '3.5.0-SNAPSHOT'
    id 'io.spring.dependency-management' version '1.1.7'
}

group = 'com.enjoywalk'
version = '0.0.1-SNAPSHOT'

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
    maven { url 'https://repo.spring.io/milestone' }
    maven { url 'https://repo.spring.io/snapshot' }
}

tasks.named('bootJar') {
    enabled = false
}

tasks.named('jar') {
    enabled = false
}

subprojects {
    apply plugin: 'java'

    repositories {
        mavenCentral()
        maven { url 'https://repo.spring.io/milestone' }
        maven { url 'https://repo.spring.io/snapshot' }
        maven { url 'https://repo.spring.io/release' }
    }

    group = 'com.enjoywalk'
    version = '0.0.1-SNAPSHOT'

    java {
        toolchain {
            languageVersion = JavaLanguageVersion.of(21)
        }
    }

    dependencies {
        // == Lombok ==
        compileOnly 'org.projectlombok:lombok'
        annotationProcessor 'org.projectlombok:lombok'

        // == DB ==
        runtimeOnly 'com.mysql:mysql-connector-j'
        implementation 'com.zaxxer:HikariCP'

        // == Test ==
        testImplementation 'org.springframework.boot:spring-boot-starter-test'
        testRuntimeOnly 'org.junit.platform:junit-platform-launcher'

        // logging
        implementation 'com.github.gavlyukovskiy:p6spy-spring-boot-starter:1.8.0'
    }

    tasks.named('test') {
        useJUnitPlatform()
    }
}

configure([project(":auth"), project(":product"), project(":payment")]) {
    dependencies {
        // == Spring Boot Starters ==
        implementation 'org.springframework.boot:spring-boot-starter-web'
        implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
        implementation 'org.springframework.boot:spring-boot-starter-validation'

        // == Jackson (JSON ì²˜ë¦¬) ==
        implementation 'com.fasterxml.jackson.core:jackson-databind'

        // MapStruct
        implementation 'org.mapstruct:mapstruct:1.5.3.Final'
        annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.3.Final'
        implementation 'org.mapstruct.extensions.spring:mapstruct-spring-annotations:1.1.2'
        annotationProcessor 'org.mapstruct.extensions.spring:mapstruct-spring-extensions:1.1.2'

        // SWAGGER
        implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.2.0' // Swagger UI
    }
}
```
### ì„¤ëª…
- [subprojects] í•˜ìœ„ ëª¨ë“  ëª¨ë“ˆì— ê³µí†µì ìœ¼ë¡œ ì ìš©í•  ì„¤ì • ì •ì˜ (í”ŒëŸ¬ê·¸ì¸, JDK, í…ŒìŠ¤íŠ¸, ì €ì¥ì†Œ ë“±)
- [configure] auth, product, payment ëª¨ë“ˆì— ê³µí†µìœ¼ë¡œ ì ìš©í•  ì˜ì¡´ì„± ì •ì˜.
- [configure] Lombok, Web, JPA, Validation, Test ê´€ë ¨ ê³µí†µ ì„¤ì • subprojects í¬í•¨.

## ğŸ“ common/build.gradle
```groovy
plugins {
    id 'java-library'
    id 'org.springframework.boot'
    id 'io.spring.dependency-management'
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-validation'
}

tasks.named('bootJar') {
    enabled = false
}
tasks.named('jar') {
    enabled = true
}
```
### ì„¤ëª…
- java-library: ë‹¤ë¥¸ ëª¨ë“ˆì´ commonì„ ì°¸ì¡°í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•œ í”ŒëŸ¬ê·¸ì¸.
- jar í™œì„±í™”: ì‹¤ì œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì•„ì¹´ì´ë¸Œ ìƒì„± í•„ìš”.
- common ëª¨ë“ˆì€ Spring Boot ì‹¤í–‰ ëª¨ë“ˆì´ ì•„ë‹ˆë¯€ë¡œ bootJar ë¹„í™œì„±í™”.
- ìµœì´ˆ common ëª¨ë“ˆì€ Spring ê´€ë ¨ ì„¤ì •ì€ ì—†ì„ ê²ƒìœ¼ë¡œ ìƒê°€í•´ì„œ  id 'org.springframework.boot', id 'io.spring.dependency-management' ë¥¼ plugins ì—ì„œ ì œì™¸í–ˆì—ˆëŠ”ë° MySqlDataSourceConfig íŒŒì¼ì´ ë“¤ì–´ì˜¤ë©´ì„œ Spring ê´€ë ¨ ì„¤ì •ì´ í¬í•¨ë˜ë„ë¡ ë³€ê²½.


## ğŸ“ auth / product / payment (ê³µí†µ êµ¬ì¡°)
```groovy
plugins {
    id 'java'
    id 'org.springframework.boot'
    id 'io.spring.dependency-management'
}

dependencies {
    implementation project(':common') // common ëª¨ë“ˆ ì˜ì¡´ì„± ì¶”ê°€
    implementation 'org.springframework.boot:spring-boot-starter-security'
    implementation 'io.jsonwebtoken:jjwt-api:0.11.5'
    runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.11.5'
    runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.11.5' // JSON ì²˜ë¦¬ìš©

    runtimeOnly 'com.h2database:h2'
}
```
### ì„¤ëª…
- ì‹¤í–‰ ê°€ëŠ¥í•œ Spring Boot ëª¨ë“ˆì´ë¯€ë¡œ ê´€ë ¨ í”ŒëŸ¬ê·¸ì¸ ì ìš©.
- common ëª¨ë“ˆì„ ì˜ì¡´ì„±ìœ¼ë¡œ í¬í•¨í•˜ì—¬ ê³µí†µ ì½”ë“œ ì¬ì‚¬ìš© ê°€ëŠ¥.
- SpringSecurity, JWT ê´€ë ¨ ì˜ì¡´ì„± ì¶”ê°€
- ê°œë°œ DB ë°©í™”ë²½ ë¬¸ì œë¡œ ì ‘ì†ì´ ì•ˆë˜ëŠ” ê²½ìš° ë¡œì»¬ì—ì„œ ê°œë°œ ê°€ëŠ¥í•˜ë„ë¡ h2 DB ì¶”ê°€. 


## âœ… ì •ë¦¬
- ê³µí†µ ì„¤ì •ì€ ë£¨íŠ¸ build.gradle + subprojectsë¡œ, ì¤‘ë³µ ì œê±°.
- ì‹¤í–‰ ëª¨ë“ˆì—ë§Œ Spring Boot ê´€ë ¨ ì˜ì¡´ì„± ì ìš©.
- commonì€ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œ ë¬¶ìŒ(JARë¡œ ìƒì„±).
- ë©€í‹°ëª¨ë“ˆ êµ¬ì¡°ëŠ” í™•ì¥ì„±, í˜‘ì—…, ìœ ì§€ë³´ìˆ˜ì„± ì¸¡ë©´ì—ì„œ í° ì¥ì ì„ ê°€ì§.

